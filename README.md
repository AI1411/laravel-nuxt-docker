# About (Currently work in progress)
Dockerized started template for Laravel + Nuxt.JS easy development.

# Installation
// todo

# Usage
// todo

## Available containers
* Nginx (as proxy resolver between Laravel and Nuxt)
* PHP-FPM version 7.3
* Node version 12.4 (For SSR)
* Redis
* PostgreSQL version 11.3
* Supervisor with queue and schedule
* Mailhog for easy SMTP testing
* NODE-CLI for front-end workspace
* PHP-CLI for back-end workspace

### TODO LIST:
- add other containers (selenium, echo-server)
- add instructions about reinstallation nuxt and laravel with fresh versions
- migrate to SSL and probably HTTP2
- add instructions about axios usage
- proxy redis port (for gui tools access)
- add commands for postgres and redis usage
- add instructions about testing (and generate .env.testing file)

**If you want, you can reinstall fresh laravel version with the following commands:**

Remove the old laravel directory and create the new empty one
```
sudo rm -rf api
mkdir api
```

Restart docker containers to allow to remount the new just created 'api' directory
```
docker-compose down
docker-compose up -d
```

Install laravel inside the container working directory (our just created api directory on the previous step)
```
docker-compose exec php-cli composer create-project --prefer-dist laravel/laravel .
```

Give permissions for all files and directories generated by docker user to current user
```
sudo chown ${USER}:${USER} -R api
```

Set up laravel permissions
```
sudo chmod -R 777 api/bootstrap/cache
sudo chmod -R 777 api/storage
```

Update environment variables and generate laravel application key
```
sudo rm api/.env
cp .env api/.env
docker-compose exec php-cli php artisan key:generate 
```

Install redis php client
```
docker-compose exec php-cli composer require predis/predis
```

Open http://localhost:8081 and make sure it works

**If you want, you can reinstall fresh laravel version with the following commands:**

```
yarn create nuxt-app client
```

Restart node container for executing fresh nuxt build process
```
docker-compose restart node
```
